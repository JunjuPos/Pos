DROP TABLE PAYMENT;
DROP TABLE BILL;
DROP TABLE JUMUN;
DROP TABLE MENU;
DROP TABLE CREDIT;
DROP TABLE MEMBER;
DROP TABLE MAINTABLE;

CREATE TABLE "MENU" (
   "MENU"   NVARCHAR2(20)      NOT NULL,
   "PRICE"   NUMBER      NOT NULL,
   "MENU_YN"   NVARCHAR2(10)      NULL,
   "CATEGORY"   NVARCHAR2(30)      NULL,
   "CATE_NO"    NUMBER      NULL
);

COMMENT ON COLUMN MENU.MENU IS '메뉴명';
COMMENT ON COLUMN MENU.PRICE IS '메뉴가격';
COMMENT ON COLUMN MENU.MENU_YN IS '판매여부';
COMMENT ON COLUMN MENU.CATEGORY IS '메뉴카테고리';
COMMENT ON COLUMN MENU.CATE_NO IS '메뉴카테고리번호';


CREATE TABLE "PAYMENT" (
   "PAY_ROW"   NUMBER      NOT NULL,
   "PAY_NO"   NUMBER      NOT NULL,
   "PAY_DATE"   DATE      NULL,
   "PAY_METHOD"   NVARCHAR2(10)      NULL,
   "PAY_YN"   NVARCHAR2(10)      NULL,
   "TOTAL_PRICE"   NUMBER      NULL
);

COMMENT ON COLUMN PAYMENT.PAY_ROW IS '결제행번호';
COMMENT ON COLUMN PAYMENT.PAY_NO IS '결제번호';
COMMENT ON COLUMN PAYMENT.PAY_DATE IS '결제시간';
COMMENT ON COLUMN PAYMENT.PAY_METHOD IS '결제방법';
COMMENT ON COLUMN PAYMENT.PAY_YN IS '결제여부';
COMMENT ON COLUMN PAYMENT.TOTAL_PRICE IS '합계금액';


CREATE TABLE "JUMUN" (
   "ORDER_NO"   NUMBER      NOT NULL,
   "MENU"   NVARCHAR2(20)      NOT NULL,
   "AMOUNT"   NUMBER      DEFAULT 0,
   "ORDER_DATE"   DATE      NULL,
   "TABLE_NO"   NUMBER      NULL,
   "PAY_YN"   NVARCHAR2(10)      NULL
);

COMMENT ON COLUMN JUMUN.ORDER_NO IS '주문번호';
COMMENT ON COLUMN JUMUN.MENU IS '주문메뉴';
COMMENT ON COLUMN JUMUN.AMOUNT IS '수량';
COMMENT ON COLUMN JUMUN.ORDER_DATE IS '주문시간';
COMMENT ON COLUMN JUMUN.TABLE_NO IS '테이블번호';
COMMENT ON COLUMN JUMUN.PAY_YN IS '결제여부';



CREATE TABLE "BILL" (
   "BILL_ROW"   NUMBER      NOT NULL,
   "BI_NO"   NUMBER      NULL,
   "MENU"   NVARCHAR2(20)      NULL,
   "PRICE"   NUMBER      NULL,
   "TOTALPRICE" NUMBER NULL,
   "AMOUNT"   NUMBER      NULL,
   "PAY_ROW"   NUMBER      NOT NULL
);


COMMENT ON COLUMN BILL.BILL_ROW IS '영수증행번호';
COMMENT ON COLUMN BILL.BI_NO IS '영수증번호';
COMMENT ON COLUMN BILL.PRICE IS '메뉴합계가격';
COMMENT ON COLUMN BILL.TOTALPRICE IS '총가격';
COMMENT ON COLUMN BILL.AMOUNT IS '수량';
COMMENT ON COLUMN BILL.PAY_ROW IS '결제행번호';
COMMENT ON COLUMN BILL.MENU IS '메뉴';


CREATE TABLE "MEMBER" (
   "M_NO"   NUMBER      NOT NULL,
   "COMPANY"   NVARCHAR2(50)      NULL,
   "DEPARTMENT"   NVARCHAR2(50)      NULL,
   "PHONE"   NVARCHAR2(50)      NULL,
   "C_MONEY"   NUMBER      NULL,
   "M_DEPOSIT"   NUMBER      NULL,
   "M_YN"   NVARCHAR2(10)      NULL
);

COMMENT ON COLUMN MEMBER.M_NO IS '고객번호';
COMMENT ON COLUMN MEMBER.COMPANY IS '회사명';
COMMENT ON COLUMN MEMBER.DEPARTMENT IS '부서명';
COMMENT ON COLUMN MEMBER.PHONE IS '연락처';
COMMENT ON COLUMN MEMBER.C_MONEY IS '외상금액';
COMMENT ON COLUMN MEMBER.M_DEPOSIT IS '선불금액';
COMMENT ON COLUMN MEMBER.M_YN IS '탈퇴여부';



CREATE TABLE "CREDIT" (
   "C_NO"   NUMBER      NOT NULL,
   "M_NO"   NUMBER      NOT NULL,
   "C_DATE"   DATE      NULL,
   "C_PAY_YN"   NVARCHAR2(10)      NULL,
   "C_PAY_MONEY"   NUMBER      NULL
);

COMMENT ON COLUMN CREDIT.C_NO IS '외상번호';
COMMENT ON COLUMN CREDIT.M_NO IS '고객번호';
COMMENT ON COLUMN CREDIT.C_DATE IS '결제시간';
COMMENT ON COLUMN CREDIT.C_PAY_YN IS '결제여부';
COMMENT ON COLUMN CREDIT.C_PAY_MONEY IS '결제금액';

CREATE TABLE MAINTABLE(
    "TABLE_NO"   NUMBER      NOT NULL,
   "TOTAL_PRICE"   NUMBER      NULL

);

COMMENT ON COLUMN MAINTABLE.TABLE_NO IS '테이블 번호';
COMMENT ON COLUMN MAINTABLE.TOTAL_PRICE IS '합계금액';

ALTER TABLE "MENU" ADD CONSTRAINT "PK_MENU" PRIMARY KEY (
   "MENU"
);

ALTER TABLE "BILL" ADD CONSTRAINT "PK_BILL" PRIMARY KEY (
   "BILL_ROW"
);

ALTER TABLE "JUMUN" ADD CONSTRAINT "PK_JUMUN" PRIMARY KEY (
   "ORDER_NO",
   "MENU"
);

ALTER TABLE "PAYMENT" ADD CONSTRAINT "PK_PAYMENT" PRIMARY KEY (
   "PAY_ROW"
);

ALTER TABLE "MEMBER" ADD CONSTRAINT "PK_MEMBER" PRIMARY KEY (
   "M_NO"
);

ALTER TABLE "CREDIT" ADD CONSTRAINT "PK_CREDIT" PRIMARY KEY (
   "C_NO",
   "M_NO"
);

ALTER TABLE "JUMUN" ADD CONSTRAINT "FK_MENU_TO_JUMUN_1" FOREIGN KEY (
   "MENU"
)
REFERENCES "MENU" (
   "MENU"
);

ALTER TABLE "CREDIT" ADD CONSTRAINT "FK_MEMBER_TO_CREDIT_1" FOREIGN KEY (
   "M_NO"
)
REFERENCES "MEMBER" (
   "M_NO"
);


INSERT INTO MENU VALUES('가정식백반',6000 ,'Y','밥',1);
INSERT INTO MENU VALUES('칼국수',7000 ,'Y','면',2);
INSERT INTO MENU VALUES('수제비',7000 ,'Y','면',2);
INSERT INTO MENU VALUES('장칼국수',7000 ,'Y','면',2);
INSERT INTO MENU VALUES('된장찌개',7000 ,'Y','밥',1);
INSERT INTO MENU VALUES('김치찌개',7000 ,'Y','밥',1);
INSERT INTO MENU VALUES('순두부찌개',7000 ,'Y','밥',1);
INSERT INTO MENU VALUES('동태찌개',8000 ,'Y','밥',1);
INSERT INTO MENU VALUES('청국장',7000 ,'Y','밥',1);
INSERT INTO MENU VALUES('부대찌개',8000 ,'Y','밥',1);
INSERT INTO MENU VALUES('김치볶음밥',7000 ,'Y','밥',1);
INSERT INTO MENU VALUES('삼겹살',13000 ,'Y','밥',1);
INSERT INTO MENU VALUES('닭볶음탕(중)',30000 ,'Y','밥',1);
INSERT INTO MENU VALUES('닭볶음탕(대)',35000 ,'Y','밥',1);
INSERT INTO MENU VALUES('제육볶음(중)',20000 ,'Y','밥',1);
INSERT INTO MENU VALUES('제육볶음(대)',23000 ,'Y','밥',1);
INSERT INTO MENU VALUES('오징어볶음(중)',20000 ,'Y','밥',1);
INSERT INTO MENU VALUES('오징어볶음(대)',23000 ,'Y','밥',1);
INSERT INTO MENU VALUES('옻오리',60000 ,'Y','밥',1);
INSERT INTO MENU VALUES('옻닭',60000 ,'Y','밥',1);
INSERT INTO MENU VALUES('닭백숙',60000 ,'Y','밥',1);
INSERT INTO MENU VALUES('소주',4000 ,'Y','주류/음료',3);
INSERT INTO MENU VALUES('맥주',4000 ,'Y','주류/음료',3);
INSERT INTO MENU VALUES('막걸리',3000 ,'Y','주류/음료',3);
INSERT INTO MENU VALUES('음료수',2000 ,'Y','주류/음료',3);


--주문 테이블
INSERT INTO JUMUN VALUES(1,'칼국수',1,SYSDATE,1,'N');
INSERT INTO JUMUN VALUES(2,'된장찌개',1,SYSDATE,2,'N');
INSERT INTO JUMUN VALUES(3,'김치찌개',1,SYSDATE,2,'N');
INSERT INTO JUMUN VALUES(4,'제육볶음(중)',1,SYSDATE,3,'N');
INSERT INTO JUMUN VALUES(5,'음료수',1,SYSDATE,3,'N');
INSERT INTO JUMUN VALUES(6,'삼겹살',1,SYSDATE,4,'N');
INSERT INTO JUMUN VALUES(7,'삼겹살',1,SYSDATE,4,'N');
INSERT INTO JUMUN VALUES(8,'삼겹살',1,SYSDATE,4,'N');
INSERT INTO JUMUN VALUES(9,'가정식백반',1,SYSDATE,5,'N');
INSERT INTO JUMUN VALUES(10,'청국장',1,SYSDATE,1,'N');
INSERT INTO JUMUN VALUES(11,'제육볶음(중)',1,SYSDATE,6,'N');
INSERT INTO JUMUN VALUES(12,'김치볶음밥',1,SYSDATE,7,'N');

-- BILL
INSERT INTO BILL VALUES(1,1,'칼국수',7000, 7000, 1,1);
INSERT INTO BILL VALUES(2,2,'된장찌개',7000, 14000, 1,2);
INSERT INTO BILL VALUES(3,2,'김치찌개',7000, 14000, 1,2);
INSERT INTO BILL VALUES(4,3,'제육볶음(중)',20000, 22000, 1,3);
INSERT INTO BILL VALUES(5,3,'음료수',2000, 22000, 1,3);

-- PAYMENT
INSERT INTO PAYMENT VALUES(1, 1, SYSDATE, '현금', 'Y', 7000);
INSERT INTO PAYMENT VALUES(2, 2, SYSDATE, '카드', 'Y', 14000);
INSERT INTO PAYMENT VALUES(3, 3, SYSDATE, '현금', 'Y', 22000);


-- MEMBER
INSERT INTO MEMBER VALUES(1,'A회사','A부서','010-1234-5678',10000,0,'Y');
INSERT INTO MEMBER VALUES(2,'B회사','B부서','010-9874-5746',20000,0,'Y');
INSERT INTO MEMBER VALUES(3,'C회사','C부서','010-0000-0000',30000,0,'Y');
INSERT INTO MEMBER VALUES(4,'D회사','D부서','010-1111-1111',40000,0,'Y');
INSERT INTO MEMBER VALUES(5,'E회사','E부서','010-2222-2222',50000,50000,'Y');



-- CREDIT
INSERT INTO CREDIT VALUES(1,1,'20/05/01','Y',10000);
INSERT INTO CREDIT VALUES(2,1,'20/05/02','Y',20000);
INSERT INTO CREDIT VALUES(3,2,'20/05/03','N',30000);
INSERT INTO CREDIT VALUES(4,2,'20/05/04','Y',40000);
INSERT INTO CREDIT VALUES(5,3,'20/05/05','N',50000);


-- MAINTABLE
INSERT INTO MAINTABLE VALUES(1,14000);
INSERT INTO MAINTABLE VALUES(2,14000);
INSERT INTO MAINTABLE VALUES(3,22000);
INSERT INTO MAINTABLE VALUES(4,39000);
INSERT INTO MAINTABLE VALUES(5,6000);
INSERT INTO MAINTABLE VALUES(6,20000);
INSERT INTO MAINTABLE VALUES(7,7000);
INSERT INTO MAINTABLE VALUES(8,0);
INSERT INTO MAINTABLE VALUES(9,0);
INSERT INTO MAINTABLE VALUES(10,44000);

-----------------------------------------------------------------------------------------------------------------------------------
--시퀀스
DROP SEQUENCE SEQ_JUMUN;
CREATE SEQUENCE SEQ_JUMUN
START WITH 13;

-- MEMBER 시퀀스
DROP SEQUENCE SEQ_MNO;
CREATE SEQUENCE SEQ_MNO
START WITH 6;

-----------------------------------------------------------------------------------------------------------------------------------
--VIEW


COMMIT;
